\documentclass[../thesis.tex]{subfiles}

\begin{document}

\chapter{Benchmark}

\section{Aim}
The aim for benchmarking is understanding the performance characteristics of the proposed system under various loads and system configurations.

\section{Setup}

The hardware used for benchmarking is detailed in \autoref{sec:benchmarkingServer} and the critical technical specifications that affect the performance of the system are:
\begin{itemize}
	\item 8 Core 16 Threads
	\item 4.3 Ghz Clock Speed
	\item 32 GB Memory
	\item Hardware Virtualisation Enabled
\end{itemize}

To observe the performance characteristics of the proposed system with horizontal scalling, additional hardwares used for horizontal scalling benchmarking are listed below:
\begin{itemize}
	\item MacBook Pro 16 2019
		\begin{itemize}
			\item 8 Core 16 Threads
		\end{itemize}
	\item HP Envy dv6 2013
		\begin{itemize}
			\item 4 Core 8 Threads
		\end{itemize}
\end{itemize}


The software used for benchmarking is detailed in \autoref{sec:software} and the critical tehcnical specifications are:
\begin{itemize}
	\item Ubuntu 20.04
	\item Docker Engine Enabled
\end{itemize}

Additionally, the proposed system have two configrations that can be tweaked to show how the performance can be impacted:

\begin{itemize}
	\item Number of backend instances
	\item Number of async workers
\end{itemize}

The components of the proposed system are deployed to the benchmarking server using Docker Containers\footnote{A container virtualisation method, which allows the components to be run in an isolated environment that is always identical regardless of the environments of the server.} to manage the runtime dependencies. Note that this method of deployment have minimal impact of the performance of system. 

\section{Procedures}

\subsection{Limited Computational Resources}
The configurations listed in the table \ref{tab:lowsysconfbench} are used to observe the behaviours of the proposed system with limited computation resources that is comparable to a modern laptop.

\begin{table}[h!]
	\begin{center}
		\caption{A set of system configurations used for performance benchmarking with limited computational resources.}
		\label{tab:lowsysconfbench}
		\begin{tabular}{l|l|l}
			\toprule
			\textbf{No. Backend Instances} & \textbf{No. Async Workers} & \textbf{No. Devices}\\
			\midrule
			4 & 4 & 50\\
			4 & 4 & 100\\
			4 & 4 & 200\\
			\bottomrule
		\end{tabular}
	\end{center}
\end{table}

\subsection{Reasonable Computational Resources}

The configurations listed in the table \ref{tab:highsysconfbench} are used to observe the behaviours of the proposed system with reasonable computation resources that is comparable to a high performance consumer grade desktop computer system.

\begin{table}[h!]
	\begin{center}
		\caption{A set of system configurations used for performance benchmarking with reasonable computational resources.}
		\label{tab:highsysconfbench}
		\begin{tabular}{l|l|l}
			\toprule
			\textbf{No. Backend Instances} & \textbf{No. Async Workers} & \textbf{No. Devices}\\
			\midrule
			4 & 12 & 50\\
			4 & 12 & 100\\
			4 & 12 & 200\\
			\bottomrule
		\end{tabular}
	\end{center}
\end{table}

\subsection{Horizontal Scalling}

The proposed system is designed to scale, that is, having the capability of running multiple instances on multiple servers to distribute the load. The table \ref{tab:scalebench} shows the configurations used for benchmarking where there are three physically separated servers contributing to executing the tasks at the same time. The computation resources provided by the servers are shown in the table \ref{tab:computecontrib}

\begin{table}[h!]
	\begin{center}
		\caption{Contribution to computational resources.}
		\label{tab:computecontrib}
		\begin{tabular}{l|l|l|l}
			\toprule
			\textbf{Server} & \textbf{Threads} & \textbf{No. Backend} & \textbf{No. Workers}\\
			\midrule
			Benchmarking Server & 16 & 4 & 12\\
			MacBook Pro 16 2019 & 16 & 0 & 16\\
			HP Envy dv6 2013 & 8 & 0 & 8\\
			\bottomrule
		\end{tabular}
	\end{center}
\end{table}

\begin{table}[h!]
	\begin{center}
		\caption{A set of system configurations used for scalability benchmarking.}
		\label{tab:scalebench}
		\begin{tabular}{l|l|l}
			\toprule
			\textbf{No. Backend Instances} & \textbf{No. Async Workers} & \textbf{No. Devices}\\
			\midrule
			4 & 12 + 8 + 16 & 100\\
			4 & 12 + 8 + 16 & 200\\
			4 & 12 + 8 + 16 & 500\\
			4 & 12 + 8 + 16 & 1000\\
			\bottomrule
		\end{tabular}
	\end{center}
\end{table}

\subsection{Generating Loads}

The simulator is used to generate realisitic loads by spawning computer processes that are accssing the backend in the same manner as a real remote sensing device. For each simulated remote sensing device, it sends the sensing data to the backend every second for a total of 100 iterations to create a sustained load.

\subsection{Measuring Response Time}

To quantify the performance, the response time of each request is measured and recorded. Once a simulated device has finished sending data, the response time for each iteration is saved to a CSV (Comma Seperated Values) file. Once all simulated devices have finished sending data, the average response time for each iteration is calculated and saved to another CSV file.

\section{Analysis}

\subsection{Limited Computational Resources}
\subsection{Reasonable Computational Resources}
\subsection{Horizontal Scalling}

\end{document}